CREATE TABLE User_Profile
(
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name       VARCHAR2(100) NOT NULL,
    email      VARCHAR2(150) NOT NULL,
    password      VARCHAR2(100) NOT NULL,
    CONSTRAINT UQ_EMAIL_PROFILE UNIQUE (EMAIL)
);


CREATE TABLE Music
(
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    title      VARCHAR2(255) NOT NULL,
    description VARCHAR2(500),
    url VARCHAR2(500) NOT NULL,
    category VARCHAR2(50) NOT NULL
);


CREATE TABLE HISTORICO_MUSICAS
(
    id  NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    id_user_profile    NUMBER NOT NULL,
    id_music     NUMBER NOT NULL,
    played_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    CONSTRAINT FK_USER_MUSIC_HISTORY FOREIGN KEY (id_user_profile)
        REFERENCES PERFIL_USUARIO (id) ON DELETE CASCADE,

    CONSTRAINT FK_MUSIC_HISTORY FOREIGN KEY (id_music)
        REFERENCES MUSICAS (id) ON DELETE CASCADE
);